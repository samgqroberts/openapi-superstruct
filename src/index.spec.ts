import { generate } from '.';

describe('generate', () => {
  describe('object input', () => {
    it('case: simple', async () => {
      const file = await generate({
        input: {
          components: {
            schemas: {
              ModelOne: {
                properties: {
                  string_field_one: {
                    type: 'string'
                  },
                  string_field_two: {
                    type: 'string'
                  }
                },
                required: ['string_field_one'],
                type: 'object'
              }
            }
          }
        }
      });
      expect(file).toEqual(`/* eslint-disable */
/* autogenerated by openapi-superstruct */

import * as s from 'superstruct';

const struct_ModelOne = s.object({
  "string_field_one": s.string(),
  "string_field_two": s.optional(s.string()),
});

export const structs = {
  "ModelOne": struct_ModelOne,
};

export type ModelOne = s.Infer<typeof structs['ModelOne']>;
`);
    });
  });
});
